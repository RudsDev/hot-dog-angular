<div class="grid m-0">
  <div class="col-12 p-0">
    <p-card header="Promoções" styleClass="shadow-3 text-gray-900 col-12 p-2">
      <p-table
        #productsTable
        dataKey="id"
        currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} promoções"
        styleClass="p-datatable-sm"
        [rows]="10"
        [paginator]="true"
        [rowHover]="true"
        [showCurrentPageReport]="true"
        [globalFilterFields]="['nome', 'preco']"
        [tableStyle]="{ 'min-width': '70rem' }"
        [value]="allPromotions"
      >

      <ng-template pTemplate="header" class="text-red-900">
        <tr>
          <th pSortableColumn="nome">
            <div class="flex justify-content-between align-items-center">
              <div class="flex justify-content-between align-items-center">
                Nome
              </div>
              <div class="flex justify-content-between align-items-center">
                <p-sortIcon field="nome"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="nome"
                  display="menu"
                  matchMode="contains"
                  [showMatchModes]="false"
                  [showOperator]="false"
                  [showAddButton]="false"
                ></p-columnFilter>
              </div>
            </div>
          </th>

          <th pSortableColumn="tipoCalculo">
            <div class="flex justify-content-between align-items-center">
              <div class="flex justify-content-between align-items-center">
                Tipo Calculo
              </div>
              <div class="flex justify-content-between align-items-center">
                <p-sortIcon field="tipoCalculo"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="tipoCalculo"
                  display="menu"
                  matchMode="contains"
                  [showMatchModes]="false"
                  [showOperator]="false"
                  [showAddButton]="false"
                ></p-columnFilter>
              </div>
            </div>
          </th>

          <th pSortableColumn="baseCalculo">
            <div class="flex justify-content-between align-items-center">
              <div class="flex justify-content-between align-items-center">
                Base Calculo
              </div>
              <div class="flex justify-content-between align-items-center">
                <p-sortIcon field="baseCalculo"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="baseCalculo"
                  display="menu"
                  matchMode="contains"
                  [showMatchModes]="false"
                  [showOperator]="false"
                  [showAddButton]="false"
                ></p-columnFilter>
              </div>
            </div>
          </th>

          <th>
            <div class="flex justify-content-end">
              <p-button
                styleClass="p-button-info"
                icon="pi pi-plus"
                label="Adicionar"
                tooltipPosition="top"
                (onClick)="handleCrudTableEventEmit({ action: action.CREATE })"
              ></p-button>
            </div>
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-promotion>
        <tr>
          <td>{{ promotion.nome }}</td>
          <td><app-promotions-type-badge [promotion]="promotion"/></td>
          <td><app-promotions-base-badge [promotion]="promotion"/></td>
          <td>
            <div
              class="flex justify-content-end align-content-center align-items-center gap-2"
            >
              <p-button
                pRipple
                size="small"
                icon="pi pi-pencil"
                aria-label="Editar promoção"
                severity="warning"
                [rounded]="true"
                (onClick)="handleCrudTableEventEmit({ action: action.UPDATE, id: promotion.id })"
              ></p-button>
              <p-button
                pRipple
                size="small"
                icon="pi pi-trash"
                aria-label="Editar promoção"
                severity="danger"
                [rounded]="true"
                (onClick)="handleCrudTableEventEmit({ action: action.DELETE, id: promotion.id })"
              ></p-button>
            </div>
          </td>
        </tr>
      </ng-template>

      </p-table>
    </p-card>
  </div>
</div>
